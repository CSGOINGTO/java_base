#### CAS（compare and swap）

比较后（比较内存中的旧值和预期值）交换（将内存中的旧值替换成预期值）。

CAS属于乐观锁，乐观的认为程序中的并发情况不是很严重，因此让线程不断的去尝试更新。

缺点：

+ 长时间自旋非常消耗资源

CAS的一个操作周期别成为自旋，如果线程间竞争很激烈的话，那么总会很多线程处于自旋状态，直达操作成功。这个过程是非常消耗CPU资源的，应该尽量避免。

+ ABA的问题

通过CAS操作，变量值由A->B->A，那么从变量值上看不出其中的过程，会导致隐患。例如栈中存在A1->B1->A1，当将A1和B1弹出栈之后，和之前的栈TOP位置处的A1一样，会误认为栈内容没有变化。解决方案：给每次操作赋值一个递增值作为版本号，每次CAS时，也比较一下版本号是否一致。